<html>
	<head>
		<meta name="viewport" content="width=device-width">
		<title></title>
		<style media="screen">
			* { margin:0; padding:0; }
			iframe {
				width: 100%; height: 100%;
			}
		</style>
	</head>
	<body>
		<div id="name">
			in the iframe-B
		</div>
		<iframe src="/a"></iframe>

		<script charset="utf-8">
			var iframe = document.querySelector('iframe');
			iframe.addEventListener('load', function () {
				// iframe.contentWindow.addEventListener('pagehide', function () {
				// 	console.log('pagehide');
				// }, false);

				var anchors = iframe.contentDocument.querySelectorAll('a');
				Array.prototype.forEach.call(anchors, function (a) {
					if (! a.getAttribute('target')) {
						a.setAttribute(
							'href',
							a.getAttribute('href') +'?k=v'
						);
						console.log("href:", a.getAttribute('href'));
					}
				});
			}, false);

			// iframe.contentWindow.addEventListener('pagehide', function () {
			// 	console.log('pagehide');
			// }, false);
			// iframe.contentWindow.addEventListener('pageshow', function () {
			// 	console.log('pageshow');
			// }, false);

		</script>
	</body>
</html>
